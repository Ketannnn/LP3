// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

contract SimpleBankRemix {
        mapping(address => uint256) private balances;

        event Deposited(address indexed who, uint256 amount);
        event Withdrawn(address indexed who, uint256 amount);

        // Constructor with the payable modifier to accept Ether during deployment
        constructor() payable {
                // Accept and store the Ether sent during deployment
                balances[msg.sender] += msg.value;
                emit Deposited(msg.sender, msg.value);
        }

        // Deposit by calling deposit() with a value (Remix "Value" field)
        function deposit() external payable {
                require(msg.value > 0, "Send some ETH to deposit");
                balances[msg.sender] += msg.value;
                emit Deposited(msg.sender, msg.value);
        }

        // Withdraw an exact amount in wei (advanced)
        function withdraw(uint256 amount) public {
                require(amount > 0, "Withdraw amount must be > 0");
                uint256 bal = balances[msg.sender];
                require(bal >= amount, "Insufficient balance");

                // effects
                balances[msg.sender] = bal - amount;

                // interaction
                (bool ok, ) = payable(msg.sender).call{ value: amount }("");
                require(ok, "Transfer failed");

                emit Withdrawn(msg.sender, amount);
        }

        // --- Remix-friendly helpers (use these to avoid typing huge wei numbers) ---

        // Withdraw using an amount in *ether* (e.g. pass 1 for 1 ETH, pass 5 for 5 ETH, pass 1 for 1)
        function withdrawInEther(uint256 amountInEther) external {
                uint256 amount = amountInEther * 1 ether;
                withdraw(amount);
        }

        // Returns caller's balance in wei
        function getMyBalanceWei() external view returns (uint256) {
                return balances[msg.sender];
        }

        // Returns caller's balance in whole ETH (truncated). Good for easy reading in Remix.
        function getMyBalanceEther() external view returns (uint256) {
                return balances[msg.sender] / 1 ether;
        }

        // Allow plain transfers to be counted as deposits
        receive() external payable {
                balances[msg.sender] += msg.value;
                emit Deposited(msg.sender, msg.value);
        }
}
